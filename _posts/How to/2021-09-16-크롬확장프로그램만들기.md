---
title: "í¬ë¡¬ í™•ì¥ í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸°"
excerpt: "Chrome extensions Getting started tutorial"

categories:
  - How to
tags:
  - [Chrome extensions Getting started, Extension, Chrome, manifest version 3]

date: 2021-09-16
last_modified_at: 2019-09-17
---

í¬ë¡¬ í™•ì¥ í”„ë¡œê·¸ë¨ ë§Œë“œëŠ” ë°©ë²•ì„ ê²€ìƒ‰í•˜ë©´, ëŒ€ë¶€ë¶„ manifest.json 1, 2ë²„ì „ì˜ í¬ìŠ¤íŒ…ë“¤ì´ë¼
manifest version 3ì— ê´€í•œ í¬ë¡¬ ê°œë°œì ê³µì‹ íŠœí† ë¦¬ì–¼ì„ ë³´ë©´ì„œ ë”°ë¼í•´ë³¸ ë‚´ìš©ì„ í¬ìŠ¤íŒ….<br/>
ì´ íŠœí† ë¦¬ì–¼ì€ ì‚¬ìš©ìê°€ í˜„ì¬ í¬ì»¤ìŠ¤ê°€ ìˆëŠ” í˜ì´ì§€ì˜ ë°°ê²½ìƒ‰ì„ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í™•ì¥ì„ ë¹Œë“œí•œë‹¤.

## êµ¬ì„± ìš”ì†Œ

extensions(ì´í•˜ í™•ì¥)ì˜ êµ¬ì„± ìš”ì†Œì—ëŠ” background scripts, content scripts, options page, UI elements ë° ë‹¤ì–‘í•œ ë…¼ë¦¬ íŒŒì¼ì´ í¬í•¨ëœë‹¤.<br/>
í™•ì¥ êµ¬ì„± ìš”ì†ŒëŠ” ê¸°ëŠ¥ì— ë”°ë¼ HTML, CSS, JavaScriptì™€ ê°™ì€ ì›¹ ê°œë°œ ê¸°ìˆ ë¡œ ìƒì„±ë˜ë©° ëª¨ë“  ì˜µì…˜ì´ í•„ìš”í•œ ê²ƒì€ ì•„ë‹ˆë‹¤.

## manifest.json ë§Œë“¤ê¸°

í™•ì¥ í”„ë¡œê·¸ë¨ì˜ í•„ìˆ˜ êµ¬ì„± ìš”ì†Œì—ëŠ” manifest.json íŒŒì¼ì´ í•„ìš”í•˜ë©°, manifest.jsonì— ë“¤ì–´ê°€ì•¼í•  ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```
// manifest.json
{
  "name": "Getting Started Example", // í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ì´ë¦„
  "description": "Build an Extension!", // í™•ì¥ í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì„¤ëª…
  "version": "1.0", // í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ë²„ì „
  "manifest_version": 3 // manifest ë²„ì „
}
```

ìœ„ì™€ ê°™ì´ manifest.jsonì„ ë§Œë“¤ê³  ë‚˜ë©´, í•´ë‹¹ íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ê°œë°œì ëª¨ë“œì—ì„œ í™•ì¥ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì¶”ê°€ í•  ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/80252585/133546442-f7d1188c-d490-4d2f-bec2-3905260510fc.png){: .align-center}

- í™•ì¥ í”„ë¡œê·¸ë¨ ê´€ë¦¬í˜ì´ì§€(chrome://extensions): ì ‘ì†
- ê°œë°œì ëª¨ë“œ: ì¼œê¸°
- ì••ì¶•í•´ì œëœ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë¡œë“œ: í´ë¦­
- í•´ë‹¹ ë””ë ‰í† ë¦¬ ì„ íƒ

![image](https://user-images.githubusercontent.com/80252585/133546865-dac073d7-1934-4ae9-822a-47ec728ccbc4.png){: .align-center}
ì™„ë£Œí•˜ë©´ ìœ„ì™€ ê°™ì´ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ë“±ë¡ë˜ì–´ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.<br/>
(ê¸°ëŠ¥ì€ êµ¬í˜„ë˜ì§€ ì•Šì•„ ì‹¤ì œ ì‹¤í–‰ë˜ëŠ” ê±´ ì—†ë‹¤.)

## ê¸°ëŠ¥ ì¶”ê°€

### ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë“±ë¡í•˜ë©´ ì–´ë–¤ íŒŒì¼ì„ ì°¸ì¡°í•´ì•¼ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  í•´ë‹¹ íŒŒì¼ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í•˜ëŠ”ì§€ í™•ì¥ëª…ì´ ì•Œë ¤ì¤€ë‹¤.

```
{
  "name": "Getting Started Example",
  "description": "Build an Extension!",
  "version": "1.0",
  "manifest_version": 3,
  "background": { // ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸
    "service_worker": "background.js" // manifest version 3 ì´í›„ì— ë³€ê²½ ë¨.
  }
}
```

manifest version 3ì—ì„œëŠ” ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ ë“±ë¡í•˜ëŠ” ë°©ë²•ì´ ê¸°ì¡´ê³¼ ë‹¬ë¼ì¡Œë‹¤. ë²„ì „ 3ë¶€í„°ëŠ” service_workerê°€ í¬í•¨ ë˜ì—ˆìœ¼ë©°,
í™•ì¥ í”„ë¡œê·¸ë¨ì„ ìƒˆë¡œê³ ì¹¨í•˜ë©´ Chromeì€ ì§€ì •ëœ íŒŒì¼ì—ì„œ ìˆ˜ì‹  ëŒ€ê¸°í•´ì•¼ í•˜ëŠ” ì¤‘ìš”í•œ ì´ë²¤íŠ¸ì™€ ê°™ì€ ì¶”ê°€ ì§€ì¹¨ì„ ìŠ¤ìº”í•œë‹¤.

### ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê¸°

ìœ„ì—ì„œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ì¶”ê°€í•œ background.jsë¥¼ ìƒì„±í•´ì£¼ì.

```
// background.js

let color = '#3aa757'; // ë°°ê²½ìƒ‰ ë°ì´í„°

chrome.runtime.onInstalled.addListener(() => { // runtime.onInstalledì— ëŒ€í•œ ìˆ˜ì‹  ì´ë²¤íŠ¸ë¥¼ í¬í•¨í•˜ì—¬ ì‹œì‘.
  chrome.storage.sync.set({ color }); // ë°°ê²½ìƒ‰ ë°ì´í„°ë¥¼ storageì— ì €ì¥.
  console.log('Default background color set to %cgreen', `color: ${color}`); // console.logë¥¼ í†µí•´ ì €ì¥ëœ ë°°ê²½ìƒ‰ì„ í™•ì¸.
});
```

Chromeì€ `chrome.runtime`ë“±ê³¼ ê°™ì€ ë§ì€ íŠ¹ìˆ˜ ëª©ì  APIê°€ í¬í•¨ëœ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
ëŒ€ë¶€ë¶„ì˜ `chrome.*` APIì˜ ë©”ì„œë“œëŠ” ë¹„ë™ê¸°ì‹ìœ¼ë¡œ, ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ë°˜í™˜í•œë‹¤.
ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ì•Œì•„ì•¼ í•˜ëŠ” ê²½ìš°, ì½œë°± í•¨ìˆ˜ë¥¼ ë©”ì„œë“œì— ì „ë‹¬í•œë‹¤.

ìœ„ì—ì„œ ì‚¬ìš©í•œ `chrome.runtime` APIëŠ” background pageë¥¼ ê²€ìƒ‰, ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ë¥¼ ë°˜í™˜,
ì•± ë˜ëŠ” í™•ì¥ í”„ë¡œê·¸ë¨ lifecycleì˜ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹  ëŒ€ê¸°í•˜ê³  ì‘ë‹µí•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤. ë˜í•œ ì´ APIë¥¼ ì‚¬ìš©í•˜ì—¬ URLì˜ ìƒëŒ€ ê²½ë¡œë¥¼ ì •ê·œí™”ëœ
URLë¡œ ë³€í™˜í•  ìˆ˜ ë„ ìˆë‹¤.

`runtime.onInstalled`ëŠ” `chrome.runtime`ì˜ ì´ë²¤íŠ¸ ì¤‘ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì²˜ìŒ ì„¤ì¹˜ë  ë•Œë‚˜ ìƒˆ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ë•Œ,
ë˜ëŠ” Chromeì´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ë•Œ ì‹¤í–‰ëœë‹¤.

`chrome.storage` APIëŠ” ì‚¬ìš©ìê°€ ë°ì´í„°ì— ëŒ€í•œ ë³€ê²½ ì‚¬í•­ì„ ì €ì¥, ê²€ìƒ‰ ë° ì¶”ì í•  ë•Œ ì‚¬ìš©í•œë‹¤.<br/>
ì‚¬ìš©ì ë°ì´í„°ì˜ ì €ì¥ì€ `storage.sync` ë˜ëŠ” `storage.local`ì„ ì‚¬ìš©í•˜ì—¬ í•  ìˆ˜ ìˆìœ¼ë©°,
`storage.sync` ì‚¬ìš©ìê°€ ë™ê¸°í™”ë¥¼ í™œì„±í™”í•œ ê²½ìš° ì €ì¥ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•œ ëª¨ë“  Chrome ë¸Œë¼ìš°ì €ì— ìë™ìœ¼ë¡œ ë™ê¸°í™”í•œë‹¤.<br/>
Chromeì´ ì˜¤í”„ë¼ì¸ ìƒíƒœì´ë©´ Chromeì€ ë°ì´í„°ë¥¼ ë¡œì»¬ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ ,
ë‹¤ìŒ ë²ˆì— ë¸Œë¼ìš°ì €ê°€ ì˜¨ë¼ì¸ ìƒíƒœê°€ ë˜ë©´ í¬ë¡¬ì€ ë°ì´í„°ë¥¼ ë™ê¸°í™”í•œë‹¤.<br/>
ì‚¬ìš©ìê°€ ë™ê¸°í™”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ë„ `storage.sync`ëŠ” ê³„ì† ì‘ë™í•œë‹¤. ì´ ê²½ìš° storage.localê³¼ ë™ì¼í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤.<br/>
`storage.sync`ì™€ `storage.local`ì˜ ì°¨ì´ì ì€
<a href="https://developer.chrome.com/docs/extensions/reference/storage/" target="_blank">**_ì—¬ê¸°_**</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br/>
storageì— ì €ì¥ ë˜ëŠ” ë°ì´í„°ëŠ” ì•”í˜¸í™” ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê¸°ë°€ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•´ì„œëŠ” ì•ˆëœë‹¤.<br/>
`chrome.storage` API ë“± ëŒ€ë¶€ë¶„ì˜ chrome APIëŠ” ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì•ˆì˜ `permissions`í•„ë“œì— ë“±ë¡í•´ì•¼ë§Œ í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/>
ë”°ë¼ì„œ ìœ„ì—ì„œ ë§Œë“  ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¹ì¥ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. chrome.storage API ì‚¬ìš©ê¶Œí•œì„ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ë“±ë¡í•˜ì—¬ ë™ì‘ì‹œì¼œë³´ì.

### ì €ì¥ ê¶Œí•œ(storage permission) ì¶”ê°€

```
{
  "name": "Getting Started Example",
  "description": "Build an Extension!",
  "version": "1.0",
  "manifest_version": 3,
  "background": {
    "service_worker": "background.js"
  },
  "permissions": ["storage"]
}
```

ì €ì¥ ê¶Œí•œì„ ì¶”ê°€í•˜ì˜€ë‹¤. ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.
![image](https://user-images.githubusercontent.com/80252585/133552814-89742bf8-76b0-40e0-aee1-1bb6d2f57e2d.png){: .align-center}

- ìš°ì¸¡ í•˜ë‹¨ì˜ ìƒˆë¡œê³ ì¹¨: í´ë¦­
- ìƒˆë¡œ ë‚˜íƒ€ë‚œ ë·° ê²€ì‚¬ ì„œë¹„ìŠ¤ ì›Œì»¤: í´ë¦­
  ![image](https://user-images.githubusercontent.com/80252585/133552990-f1f90a2a-573c-4fb3-8f99-f6a3449857dd.png){: .align-center}
  ì½˜ì†”ì°½ì— ë‹¤ìŒê³¼ ê°™ì´ `#3aa757` ìƒ‰ìƒì˜ `green` ë¬¸ìì—´ì´ ì¶œë ¥ë˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœ ê²ƒì´ë‹¤.

## ìœ ì € ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€

### popup.html ìƒì„±

í™•ì¥ í”„ë¡œê·¸ë¨ì€ ë‹¤ì–‘í•œ í˜•íƒœì˜ UIë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ”ë°, ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” popupì„ ì‚¬ìš©í•˜ì—¬ ë§Œë“¤ì–´ë³´ì.
popupì€ í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ì•„ì´ì½˜ì„ í´ë¦­í–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” í˜ì´ì§€ë¥¼ ì˜ë¯¸í•˜ë©° popup.html, index.htmlê³¼ ê°™ì€ í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•œë‹¤.
í•´ë‹¹ ë””ë ‰í† ë¦¬ì— `popup.html`íŒŒì¼ì„ ìƒì„±í•˜ì.

```
<!-- popup.html -->
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="button.css">
  </head>
  <body>
    <button id="changeColor"></button>
  </body>
</html>
```

### í•´ë‹¹ íŒì—… ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ì„ ì–¸

ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ì™€ ë§ˆì°¬ê°€ì§€ë¡œ popup.htmlì´ ë™ì‘í•˜ê¸° ìœ„í•´ì„  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ì„ ì–¸ë˜ì–´ì•¼ í•œë‹¤.
ë°©ë²•ì€ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— `action`ê°ì²´ë¥¼ ë„£ê³ , ê·¸ ì•ˆì— `default_popup`ì„ `popup.html`ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.

```
{
 "name": "Getting Started Example",
 "description": "Build an Extension!",
 "version": "1.0",
 "manifest_version": 3,
 "background": {
   "service_worker": "background.js"
 },
 "permissions": ["storage"],
 "action": {
   "default_popup": "popup.html"
 }
}
```

popup.html ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ `button.css`ë¼ëŠ” ì™¸ë¶€ CSSíŒŒì¼ì„ ì°¸ì¡°í•œë‹¤.
í•´ë‹¹ ë””ë ‰í† ë¦¬ì— ê°™ì€ ì´ë¦„ì„ ê°€ì§„ íŒŒì¼ì„ ìƒì„±í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•˜ì.

```
/* button.css */
button {
  height: 30px;
  width: 30px;
  outline: none;
  margin: 10px;
  border: none;
  border-radius: 2px;
}

button.current {
  box-shadow: 0 0 0 2px white,
              0 0 0 4px black;
}
```

### ì•„ì´ì½˜ ì´ë¯¸ì§€ ì„¤ì •

íˆ´ë°” ì•„ì´ì½˜ì— ê´€í•œ ì„¤ì •ë„ manifestì˜ actionì— í¬í•¨ëœë‹¤. `action`ì—ì„œ `default_icon` í•„ë“œë¥¼ ì¶”ê°€í•´ ì‘ì„±í•˜ì.

```
{
  "name": "Getting Started Example",
  "description": "Build an Extension!",
  "version": "1.0",
  "manifest_version": 3,
  "background": {
    "service_worker": "background.js"
  },
  "permissions": ["storage"],
  "action": {
    "default_popup": "popup.html",
    "default_icon": {
      "16": "/images/get_started16.png",
      "32": "/images/get_started32.png",
      "48": "/images/get_started48.png",
      "128": "/images/get_started128.png"
    }
  }
}
```

í•´ë‹¹ ê²½ë¡œì— ìœ„ì¹˜í•˜ëŠ” íŒŒì¼ì€
<a href="https://storage.googleapis.com/web-dev-uploads/file/WlD8wC6g8khYWPJUsQceQkhXSlv1/wy3lvPQdeJn4iqHmI0Rp.zip">**_ì—¬ê¸°_**</a>ì—ì„œ
ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆë‹¤. ë‹¤ìš´ ë°›ì•„ ê°™ì€ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜ì‹œì¼œì¤€ë‹¤.
ì½”ë“œë¥¼ ë³´ë©´ default_iconì˜ ê²½ìš° 16, 32, 48, 128 ë³„ë¡œ ë‹¤ë¥¸ íŒŒì¼ì„ ì„¤ì •í•˜ëŠ”ë° ì´ ìˆ«ìëŠ” ê°€ë¡œ,ì„¸ë¡œì˜ pxë¥¼ ì˜ë¯¸í•œë‹¤.
ì„ì˜ë¡œ ì„¤ì •í•œ ê²ƒì€ ì•„ë‹ˆë©° ê¸°ë³¸ì ìœ¼ë¡œ êµ¬ê¸€ì—ì„œ defaultë¡œ ìš”êµ¬í•˜ëŠ” ì‚¬ì´ì¦ˆ ê°™ë‹¤.

í™•ì¥ í”„ë¡œê·¸ë¨ ê´€ë¦¬í˜ì´ì§€ë‚˜ ê¶Œí•œê²½ê³  ë° faviconì—ë„ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆëŠ”ë°, ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.

```
{
  "name": "Getting Started Example",
  "description": "Build an Extension!",
  "version": "1.0",
  "manifest_version": 3,
  "background": {
    "service_worker": "background.js"
  },
  "permissions": ["storage"],
  "action": {
    "default_popup": "popup.html",
    "default_icon": {
      "16": "/images/get_started16.png",
      "32": "/images/get_started32.png",
      "48": "/images/get_started48.png",
      "128": "/images/get_started128.png"
    }
  },
  "icons": {
    "16": "/images/get_started16.png",
    "32": "/images/get_started32.png",
    "48": "/images/get_started48.png",
    "128": "/images/get_started128.png"
  }
}
```

ì½”ë“œë¥¼ ì €ì¥í•œ í›„ í™•ì¥ í”„ë¡œê·¸ë¨ ê´€ë¦¬í˜ì´ì§€ì— ë“¤ì–´ê°€ ìƒˆë¡œê³ ì¹¨ì„ ì‹¤í–‰í•˜ë©´ ì•„ì´ì½˜ì´ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ê·¸ë¦¬ê³  í•´ë‹¹ í™•ì¥ í”„ë¡œê·¸ë¨ì„ í´ë¦­í•˜ì—¬ ì‹¤í–‰í•˜ë©´, ê¸°ë³¸ ìƒ‰ìƒì˜ ë²„íŠ¼ì´ í‘œì‹œë˜ëŠ” íŒì—…ì´ ì—´ë¦°ë‹¤.

### íŒì—… ë²„íŠ¼ ìƒ‰ ì¶”ê°€

íŒì—… UIì˜ ë§ˆì§€ë§‰ ë‹¨ê³„ëŠ” ë²„íŠ¼ì— ìƒ‰ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤.
ë””ë ‰í† ë¦¬ì— popup.jsíŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ì½”ë“œë¥¼ ë¶€ì—¬í•œë‹¤.

```
// popup.js
// Initialize button with user's preferred color
let changeColor = document.getElementById("changeColor");

chrome.storage.sync.get("color", ({ color }) => {
  changeColor.style.backgroundColor = color;
});"
```

ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ popup.htmlì— ì¶”ê°€í•˜ì—¬, ì ìš©ì‹œí‚¨ë‹¤.

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="button.css">
  </head>
  <body>
    <button id="changeColor"></button>
    <script src="popup.js"></script>
  </body>
</html>
```

ë‹¤ì‹œ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ì‹¤í–‰í•˜ë©´ ê¸°ì¡´ì— ì„¤ì •í•œ `#3aa757` ìƒ‰ìƒìœ¼ë¡œ ë²„íŠ¼ì´ ë°”ë€ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

## Layer Logic ì¶”ê°€

ì´ì œ ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ, ì‹¤í–‰ë  Logicì„ êµ¬í˜„í•´ë³´ì. popup.js ëì— ë‹¤ìŒê³¼ ê°™ì´ ì½”ë”©í•œë‹¤.

```
// When the button is clicked, inject setPageBackgroundColor into current page
changeColor.addEventListener("click", async () => {
  let [tab] = await chrome.tabs.query({ active: true, currentWindow: true });

  chrome.scripting.executeScript({
    target: { tabId: tab.id },
    function: setPageBackgroundColor,
  });
});

// The body of this function will be executed as a content script inside the
// current page
function setPageBackgroundColor() {
  chrome.storage.sync.get("color", ({ color }) => {
    document.body.style.backgroundColor = color;
  });
}
```

ì¶”ê°€ëœ ì½”ë“œì˜ ë‚´ìš©ì€ ë²„íŠ¼ì— click ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ í†µí•´ ì»¨í…íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ê²ƒì´ë‹¤.<br/>
ìœ„ì˜ `let [tab] = await chrome.tabs.query({ active: true, currentWindow: true });`ì²˜ëŸ¼
í˜„ì¬ í˜ì´ì§€(íƒ­)ì— ëŒ€í•œ ì„ì‹œ ì ‘ê·¼ í—ˆìš©ì„ ìœ„í•´ì„œëŠ” `activeTab` ê¶Œí•œê³¼
`chrome.scripting.executeScript`ì²˜ëŸ¼ Scripting APIì˜ `excuteScript` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„ 
`scripting` ê¶Œí•œì´ í•„ìš”í•˜ë‹¤. í•´ë‹¹ ê¶Œí•œì„ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ í†µí•´ ì¶”ê°€í•´ì¤€ë‹¤.

```
{
  "name": "Getting Started Example",
  ...
  "permissions": ["storage", "activeTab", "scripting"],
  ...
}
```

ì´ì œ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•  ê²ƒì´ë‹¤. ëª¨ë‘ ì €ì¥í•˜ê³ , ë¦¬ë¡œë“œí•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì.

## ì‚¬ìš©ìì—ê²Œ ì˜µì…˜ ì œê³µ

ì´ í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ê¸°ëŠ¥ì€ ë°°ê²½ì„ ë…¹ìƒ‰ìœ¼ë¡œë§Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
ì˜µì…˜ í˜ì´ì§€ë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ í™•ì¥ ê¸°ëŠ¥ì— ëŒ€í•œ ì œì–´ê¶Œì„ ë” ë§ì´ ë¶€ì—¬í•˜ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤.
í•´ë‹¹ ë””ë ‰í† ë¦¬ì— `options.html`ì„ ë§Œë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.

```
<!-- options.html -->
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="button.css" />
  </head>
  <body>
    <div id="buttonDiv"></div>
    <div>
      <p>Choose a different background color!</p>
    </div>
  </body>
  <script src="options.js"></script>
</html>

```

ê·¸ëŸ° ë‹¤ìŒ ì˜µì…˜ì„ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— í•´ë‹¹ í˜ì´ì§€ë¥¼ ì¶”ê°€í•œë‹¤

```
{
  "name": "Getting Started Example",
  ...
  "options_page": "options.html"
}
```

í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë¦¬ë¡œë“œí•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì˜µì…˜ì´ í™œì„±í™” ë˜ëŠ” ê²ƒìœ¼ ë³¼ ìˆ˜ ìˆë‹¤.
![image](https://user-images.githubusercontent.com/80252585/133768335-601b4479-b045-4d01-88d1-c8aabab6703c.png){: .align-center}
ë§ˆì§€ë§‰ìœ¼ë¡œ ì˜µì…˜ ë¡œì§ì„ ì¶”ê°€í•˜ì. í•´ë‹¹ ë””ë ‰í† ë¦¬ì— `options.js`ë¥¼ ìƒì„±í•˜ê³  ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.

```
// options.js
let page = document.getElementById("buttonDiv");
let selectedClassName = "current";
const presetButtonColors = ["#3aa757", "#e8453c", "#f9bb2d", "#4688f1"];

// Reacts to a button click by marking the selected button and saving
// the selection
function handleButtonClick(event) {
  // Remove styling from the previously selected color
  let current = event.target.parentElement.querySelector(
    `.${selectedClassName}`
  );
  if (current && current !== event.target) {
    current.classList.remove(selectedClassName);
  }

  // Mark the button as selected
  let color = event.target.dataset.color;
  event.target.classList.add(selectedClassName);
  chrome.storage.sync.set({ color });
}

// Add a button to the page for each supplied color
function constructOptions(buttonColors) {
  chrome.storage.sync.get("color", (data) => {
    let currentColor = data.color;
    // For each color we were providedâ€¦
    for (let buttonColor of buttonColors) {
      // â€¦create a button with that colorâ€¦
      let button = document.createElement("button");
      button.dataset.color = buttonColor;
      button.style.backgroundColor = buttonColor;

      // â€¦mark the currently selected colorâ€¦
      if (buttonColor === currentColor) {
        button.classList.add(selectedClassName);
      }

      // â€¦and register a listener for when that button is clicked
      button.addEventListener("click", handleButtonClick);
      page.appendChild(button);
    }
  });
}

// Initialize the page by constructing the color options
constructOptions(presetButtonColors);
```

`function constructOptions(buttonColors)`ì„ í†µí•´ 4ê°€ì§€ ìƒ‰ìƒ ì˜µì…˜ì´ ì˜¨í´ë¦­ ì´ë²¤íŠ¸ ìˆ˜ì‹ ê¸°ê°€ ìˆëŠ” ì˜µì…˜ í˜ì´ì§€ì—ì„œ ë²„íŠ¼ìœ¼ë¡œ ìƒì„±ëœë‹¤.
ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ì €ì¥ì†Œ(storage)ì— ìˆëŠ” `color` ê°’ì´ ì—…ë°ì´íŠ¸ëœë‹¤.<br/>
í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  íŒŒì¼ì´ ì´ ì €ì¥ì†Œì—ì„œ ìƒ‰ìƒ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ë¯€ë¡œ ë‹¤ë¥¸ ê°’ì„ ì—…ë°ì´íŠ¸í•  í•„ìš”ê°€ ì—†ë‹¤.

---

ì°¸ê³ ì‚¬ì´íŠ¸<br/>
https://developer.chrome.com/docs/extensions/mv3/getstarted/
https://developer.chrome.com/docs/extensions/reference/
https://developer.chrome.com/docs/extensions/mv3/manifest/activeTab/
https://developer.chrome.com/docs/extensions/mv3/content_scripts/#programmatic

ğŸ“ <u><b>ì‚¬ì‹¤ì€ ë‚´ê°€ ë³´ë ¤ê³  ê¸°ë¡í•œ ê²ƒ</b></u> ğŸ˜Š
<br/>í”¼ë“œë°± ëŒ“ê¸€, ë©”ì¼ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤!
{: .notice--custom}
